# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. **–£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –≤ `ws_v2.py`**

#### –ü—Ä–æ–±–ª–µ–º—ã –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏:
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ `gift_id` - —Å—Ä–∞–≤–Ω–∏–≤–∞–ª–æ—Å—å –∫–∞–∫ `t.condition_value == gift_id` –±–µ–∑ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è —Ç–∏–ø–æ–≤
- ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–æ–≥–æ–≤ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –ø–æ—á–µ–º—É —Ç—Ä–∏–≥–≥–µ—Ä—ã –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç
- ‚ùå –ü–µ—Ä–≤—ã–π —Ç—Ä–∏–≥–≥–µ—Ä –±—ã–ª —Å `gift_id: 'Rose'` –≤–º–µ—Å—Ç–æ `gift_name: 'Rose'`

#### –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ —Å—Ç—Ä–æ–∫–µ: `str(t.condition_value) == str(gift_id)`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ —Å —ç–º–æ–¥–∑–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
  - üéÅ –¥–ª—è —Å–æ–±—ã—Ç–∏–π –ø–æ–¥–∞—Ä–∫–æ–≤
  - üëã –¥–ª—è –≤—Ö–æ–¥–∞ –∑—Ä–∏—Ç–µ–ª–µ–π
  - üéØ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
  - üîç –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
  - üîπ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–∂–¥–æ–≥–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞
  - ‚úÖ –¥–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è
  - ‚ùå –¥–ª—è –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–ª—è `gift_name` –∏ `gift_id`
- ‚úÖ –£–¥–∞–ª–µ–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç—Ä–∏–≥–≥–µ—Ä —Å `gift_id: 'Rose'` –∏ —Å–æ–∑–¥–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å `gift_name: 'Rose'`

## üìã –î–µ–π—Å—Ç–≤–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –±—ç–∫–µ–Ω–¥–∞
```bash
cd ~/backend-TTBoost-v2
git pull origin main
```

### –®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±—ç–∫–µ–Ω–¥
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å
pkill -f uvicorn

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
nohup python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 &
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
```bash
tail -f nohup.out
```

## üß™ –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –¢–µ—Å—Ç 1: –¢—Ä–∏–≥–≥–µ—Ä—ã –ø–æ–¥–∞—Ä–∫–æ–≤
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ø–æ–¥–∞—Ä–æ–∫ "Rose" –≤ TikTok Live
2. –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
   ```
   üéÅ on_gift: –ø–æ–ª—É—á–µ–Ω –ø–æ–¥–∞—Ä–æ–∫ –æ—Ç XXX: gift_id=5655, gift_name=Rose, count=1
   üîç on_gift: –Ω–∞–π–¥–µ–Ω–æ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –¥–ª—è gift: 7
      üîπ –ü—Ä–æ–≤–µ—Ä—è—é —Ç—Ä–∏–≥–≥–µ—Ä ...
      ...
      ‚úÖ MATCHED by gift_name! sound=memy.mp3
   ```

### –¢–µ—Å—Ç 2: –¢—Ä–∏–≥–≥–µ—Ä—ã viewer_join
1. –ù–∞–ø–∏—à–∏—Ç–µ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç —é–∑–µ—Ä–∞ 'kassenov96' –∏–ª–∏ 'üöÄTTBoost.proüßå'
2. –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
   ```
   üéØ –ü–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç 'kassenov96' - –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ç—Ä–∏–≥–≥–µ—Ä—ã viewer_join
   üîç –ù–∞–π–¥–µ–Ω–æ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ viewer_join: 2
      üîπ –ü—Ä–æ–≤–µ—Ä—è—é —Ç—Ä–∏–≥–≥–µ—Ä: key=username val='kassenov96' vs user='kassenov96'
      ‚úÖ MATCHED! Sending viewer_join with sound: ...
   ```

## üéØ –¢–µ–∫—É—â–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –≤ —Å–∏—Å—Ç–µ–º–µ

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π —É –≤–∞—Å –µ—Å—Ç—å:

**Gift —Ç—Ä–∏–≥–≥–µ—Ä—ã (–ø–æ gift_id):**
- ID 7934 ‚Üí damn-why-did-i-come-here.mp3
- ID 5827 ‚Üí yes-nah.mp3
- ID 5269 ‚Üí bunch.mp3
- ID 5655 ‚Üí lucky-lucky.mp3

**Gift —Ç—Ä–∏–≥–≥–µ—Ä—ã (–ø–æ gift_name):**
- Rose ‚Üí memy.mp3

**Viewer Join —Ç—Ä–∏–≥–≥–µ—Ä—ã:**
- kassenov96 ‚Üí hello-brother.mp3
- üöÄTTBoost.proüßå ‚Üí hello-brother.mp3

## üêõ –û—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã –≤—Å—ë –µ—â—ë –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ª–æ–≥–∞—Ö:

1. **–ü—Ä–∏—Ö–æ–¥—è—Ç –ª–∏ —Å–æ–±—ã—Ç–∏—è?** –ò—â–∏—Ç–µ:
   - `üéÅ on_gift: –ø–æ–ª—É—á–µ–Ω –ø–æ–¥–∞—Ä–æ–∫`
   - `üëã on_join: –∑—Ä–∏—Ç–µ–ª—å –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è`

2. **–ù–∞—Ö–æ–¥—è—Ç—Å—è –ª–∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã?** –ò—â–∏—Ç–µ:
   - `üîç on_gift: –Ω–∞–π–¥–µ–Ω–æ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –¥–ª—è gift: X`
   - –ï—Å–ª–∏ X=0, —Ç—Ä–∏–≥–≥–µ—Ä—ã –Ω–µ —Å–æ–∑–¥–∞–Ω—ã –∏–ª–∏ disabled

3. **–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ª–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ?** –ò—â–∏—Ç–µ:
   - `‚úÖ MATCHED` - —Ç—Ä–∏–≥–≥–µ—Ä —Å—Ä–∞–±–æ—Ç–∞–ª!
   - `‚ùå NO MATCH` - –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ —Å–æ–≤–ø–∞–ª–∏ (—Å–º–æ—Ç—Ä–∏—Ç–µ —á—Ç–æ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è)

4. **–í–∫–ª—é—á–µ–Ω—ã –ª–∏ –∑–≤—É–∫–∏?** –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   - `gift_sounds_enabled=True`
   - `viewer_sounds_enabled=True`
